sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/suite/ui/commons/networkgraph/layout/LayeredLayout","sap/suite/ui/commons/networkgraph/ActionButton","sap/suite/ui/commons/networkgraph/Node","sap/ui/core/Fragment","../model/formatter"],function(t,e,o,i,a,n,s){"use strict";return t.extend("opportunity.opportunity.controller.Team",{formatter:s,onInit:function(){},onSelectionChange:function(t){const e=this.getView().byId("graph");e.getNodes().forEach(t=>{const e=new sap.suite.ui.commons.networkgraph.ActionButton({title:"Detail",icon:"sap-icon://person-placeholder",press:e=>{this.onPersonDetails(t,e.getParameter("buttonElement"))}});t.addActionButton(e);const o=new sap.suite.ui.commons.networkgraph.ActionButton({title:"Engagement",icon:"sap-icon://workflow-tasks",press:e=>{this.onPressEngagement(t,e.getParameter("buttonElement"))}});t.addActionButton(o)})},onPersonDetails:function(t,e){if(!this._oQuickView){sap.ui.core.Fragment.load({name:"opportunity.opportunity.view.fragments.PersonDetail",type:"XML"}).then(o=>{this._oQuickView=o;this._oQuickView.setModel(new sap.ui.model.json.JSONModel({icon:t.getImage()&&t.getImage().getProperty("src"),title:t.getTitle(),description:t.getDescription(),inumber:this._getCustomDataValue(t,"inumber"),location:this._getCustomDataValue(t,"location"),email:this._getCustomDataValue(t,"email"),role:this._getCustomDataValue(t,"role"),joined:this._getCustomDataValue(t,"joined"),description:this._getCustomDataValue(t,"description"),mainArea:this._getCustomDataValue(t,"mainArea")}));setTimeout(()=>{this._oQuickView.openBy(e)},0)})}else{this._oQuickView.setModel(new sap.ui.model.json.JSONModel({icon:t.getImage()&&t.getImage().getProperty("src"),title:t.getTitle(),description:t.getDescription(),inumber:this._getCustomDataValue(t,"inumber"),location:this._getCustomDataValue(t,"location"),email:this._getCustomDataValue(t,"email"),role:this._getCustomDataValue(t,"role"),joined:this._getCustomDataValue(t,"joined"),description:this._getCustomDataValue(t,"description"),mainArea:this._getCustomDataValue(t,"mainArea")}));setTimeout(()=>{this._oQuickView.openBy(e)},0)}},_getCustomDataValue:function(t,e){var o=t.getCustomData().filter(function(t){return t.getKey()===e});return o.length>0&&o[0].getValue()},onPressEngagement:function(t,e){var o=t.getAttributes()[0].getLabel();var i=sap.ui.core.UIComponent.getRouterFor(this);i.navTo("Resources",{inumber:o})}})});