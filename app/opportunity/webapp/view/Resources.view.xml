<mvc:View
    controllerName="opportunity.opportunity.controller.Resources"
    id="Team"
    xmlns:u="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns:form="sap.ui.layout.form"
    xmlns:smartchart="sap.ui.comp.smartchart"
    xmlns:f="sap.f"
    xmlns:l="sap.ui.layout"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.suite.ui.commons.networkgraph.layout"
    height="100%"
    xmlns:dnd="sap.ui.core.dnd"
    xmlns:t="sap.ui.table"
    xmlns:suite="sap.suite.ui.commons"
    xmlns:rte="sap.ui.richtexteditor"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:tnt="sap.tnt"
    xmlns:dnd-grid="sap.f.dnd"
    xmlns:commons="sap.suite.ui.commons"
>
    <f:DynamicPage
        id="TeamPage"
        title="Engagement"
        backgroundDesign="List"
    >
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title
                        text="{firstName}'s Engagement Snapshot"
                        id="headerTitle"
                    />
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <f:content>
            <!-- 1. New Requests Table -->
            <VBox>
                <HBox renderType="Bare">

                    	<Table
						id="newRequestsTable"
		mode="SingleSelectMaster"
		growing="true"
		growingThreshold="10"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
        class="sapUiSmallMarginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/newRequests',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu>
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="New Requests" />
				<ToolbarSpacer/>
				<Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/>
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>
			<dnd:DragInfo
				groupName="newRequestsToRFP"
				sourceAggregation="items" />
					<dnd:DragInfo
				groupName="newRequestsToOnGoing"
				sourceAggregation="items" />

				<dnd:DragInfo
				groupName="newRequestsToGoLive"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="newRequestsToPast"
				sourceAggregation="items" />
			<dnd:DropInfo
				groupName="RFPToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="onGoingToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="goLiveToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="pastToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
                	<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
		</dragDropConfig>

        
		

		<items>
			<ColumnListItem>
				<cells>
					<Text text="{ProjectModel>account}" wrapping="true"  /> 
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>

                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightNewRequests"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftRFP"
                        />
                    </VBox>

                    <!-- 2. RFP Table -->

                    	<Table
						id="RFPTable"
		mode="SingleSelectMaster"
		growing="true"
		growingThreshold="10"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
         class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/RFP',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu>
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="RFP" />
				<ToolbarSpacer/>
				<Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/>
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>
			<dnd:DragInfo
				groupName="RFPToNewRequests"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="RFPToOnGoing"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="RFPToGoLive"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="RFPToPast"
				sourceAggregation="items" />
			<dnd:DropInfo
				groupName="newRequestsToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="onGoingToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="goLiveToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="pastToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
			<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
        </dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<Text text="{ProjectModel>account}" wrapping="true"  /> 
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>

                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightRFP"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftOnGoing"
                        />
                    </VBox>

                    <!-- 3. on going table -->

                   	<Table
					id="OnGoingTable"
		mode="SingleSelectMaster"
		growing="true"
		growingThreshold="10"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
         class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/On-Going',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu>
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="On-Going" />
				<ToolbarSpacer/>
				<Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/>
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>

		
		<dnd:DragInfo
				groupName="onGoingToNewRequests"
				sourceAggregation="items"/>
			<dnd:DragInfo
				groupName="onGoingToRFP"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="onGoingToGoLive"
				sourceAggregation="items"/>
					<dnd:DragInfo
				groupName="onGoingToPast"
				sourceAggregation="items"/>
			
				<dnd:DropInfo
				groupName="newRequestsToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>

				<dnd:DropInfo
				groupName="RFPToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>

				<dnd:DropInfo
				groupName="goLiveToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>

				<dnd:DropInfo
				groupName="pastToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
			<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
        </dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<Text text="{ProjectModel>account}" wrapping="true"  /> 
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>


                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightOnGoing"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftGoLive"
                        />
                    </VBox>

                    <!-- 4. Go Live Table -->

                    	<Table
						id="GoLiveTable"
		mode="SingleSelectMaster"
		growing="true"
		growingThreshold="10"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
        class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/Go-Live',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu>
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="Go-Live" />
				<ToolbarSpacer/>
				<Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/>
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>
			<dnd:DragInfo
				groupName="goLiveToRFP"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="goLiveToNewRequests"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="goLiveToOnGoing"
				sourceAggregation="items" />
					<dnd:DragInfo
				groupName="goLiveToPast"
				sourceAggregation="items" />
					<dnd:DropInfo
				groupName="newRequestsToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="RFPToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
			<dnd:DropInfo
				groupName="onGoingToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="pastToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
                	<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
		</dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<Text text="{ProjectModel>account}" wrapping="true"  /> 
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>


                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightGoLive"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftPast"
                        />
                    </VBox>

                    <!-- 5. Past Table -->
                   	<Table
					id="PastTable"
		mode="SingleSelectMaster"
		growing="true"
		growingThreshold="10"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
        class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/Past',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu>
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="Past" />
				<ToolbarSpacer/>
				<Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/>
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account"/>
			</Column>
            <Column>
				<Text text="Topic"/>
			</Column>
			
		</columns>
		<dragDropConfig>
		<dnd:DragInfo
				groupName="pastToNewRequests"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="pastToRFP"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="pastToOnGoing"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="pastToGoLive"
				sourceAggregation="items" />
		
			<dnd:DropInfo
				groupName="newRequestsToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="RFPToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="onGoingToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="goLiveToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
                	<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
		</dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<Text text="{ProjectModel>account}" wrapping="true" /> 
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>

                </HBox>

                <VBox class="sapUiLargeMarginTop">
                    <smartchart:SmartChart
                        id="smartChartTeamForecast"
                        enableAutoBinding="true"
                        initialized="onInitChart"
                        entitySet="teamForecastCopy"
                        beforeRebindChart="beforeRebindUtilizationChart"
                        useVariantManagement="false"
                        useChartPersonalisation="true"
                        showDownloadButton="true"
                        header="{firstName}'s Utilization"
                        showFullScreenButton="true"
                        selectionMode="Multi"
                        showChartTooltip="true"
                        showDrillBreadcrumbs="false"
                        showZoomButtons="false"
                        showDetailsButton="true"
                        showDrillButtons="false"
                        showLegendButton="false"
                        noData="Utilization is either not tracked or not applicable for {firstName}"
                        showSemanticNavigationButton="false"
                    >
                        <smartchart:toolbar>
                            <OverflowToolbar>
                                <ToolbarSpacer />
                                <Button
                                    text="Edit"
                                    icon="sap-icon://edit"
                                    type="Transparent"
                                    tooltip="Edit an existing forecast"
                                    press="onForecastEdit"
                                />

                                <OverflowToolbarButton
                                    icon="sap-icon://add"
                                    type="Accept"
                                    tooltip="Register a new forecast"
                                    press="onAddNewForecast"
                                />
                            </OverflowToolbar>
                        </smartchart:toolbar>
                    </smartchart:SmartChart>
                </VBox>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>
