<mvc:View
    controllerName="opportunity.opportunity.controller.ProjectOverview"
    id="Team"
    xmlns:u="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns:form="sap.ui.layout.form"
    xmlns:smartchart="sap.ui.comp.smartchart"
    xmlns:f="sap.f"
    xmlns:l="sap.ui.layout"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.suite.ui.commons.networkgraph.layout"
    height="100%"
    xmlns:dnd="sap.ui.core.dnd"
    xmlns:t="sap.ui.table"
    xmlns:suite="sap.suite.ui.commons"
    xmlns:rte="sap.ui.richtexteditor"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:tnt="sap.tnt"
    xmlns:dnd-grid="sap.f.dnd"
    xmlns:commons="sap.suite.ui.commons"
>
    <f:DynamicPage
        id="TeamPage"
        title="Engagement"
        backgroundDesign="List"
    >
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title
                        text="Team Engagement Snapshot"
                        id="headerTitle"
                    />
                </f:heading>
                <f:actions>
						<Button
								text="Add Project"
								icon="sap-icon://add"
								type="Accept"
								press="onAddProjectPress"/>
						<!-- <Button
								text="Delete"
								type="Transparent"/> -->
					</f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader>
                <f:content>
                    <fb:FilterBar
                        id="filterbar"
                        persistencyKey="myPersKey"
                        useToolbar="false"
                        search=".onSearch"
                        filterChange=".onFilterChange"
                        showFilterConfiguration="false"
                    >
                        <fb:filterGroupItems>
                            <fb:FilterGroupItem
                                id="filter1"
                                name="primaryContact"
                                label="Team Member"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        id="multiComboBox1"
                                        name="primaryContact"
                                        selectionChange=".onFilter1Change"
                                        items="{
												path: '/teamMembers',
                                                sorter: {
                                                path: 'firstName',
                                                descending: false
                                            },
												templateShareable: true
											}"
                                    >
                                        <core:Item
                                            key="{firstName}"
                                            text="{firstName}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                id="filter2"
                                name="Topic"
                                label="Topic"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        name="Topic"
                                        id="multiComboBox2"
                                        selectionChange=".onSelectionChange"
                                        items="{
												path: '/opportunityTopicsVH',
                                                  sorter: {
                                                path: 'topic',
                                                descending: false
                                            },
												templateShareable: true
											}"
                                    >
                                        <core:Item
                                            key="{topic}"
                                            text="{topic}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                id="filter3"
                                name="MarketUnit"
                                label="Market Unit"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        name="MarketUnit"
                                        selectionChange=".onSelectionChange"
                                        id="multiComboBox3"
                                        items="{
												path: '/opportunityMarketUnitVH',
                                                   sorter: {
                                                path: 'marketUnit',
                                                descending: false
                                            },
												templateShareable: true
											}"
                                    >
                                        <core:Item
                                            key="{marketUnit}"
                                            text="{marketUnit}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="ProjectStartDate"
                                label="Start Date (on or after)"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <DatePicker
                                        id="startDate"
                                        name="ProjectStartDate"
                                        value="{
                                            'path': '/',
                                            'type':'sap.ui.model.type.Date',
                                            'formatOptions': {
                                                'pattern': 'MM-dd-yyyy'
                                            }
                                        }"
                                    />
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="ProjectEndDate"
                                label="End Date (on or before)"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <DatePicker
                                        id="endDate"
                                        name="ProjectEndDate"
                                        value="{
                                            'path': '/',
                                            'type':'sap.ui.model.type.Date',
                                            'formatOptions': {
                                                'pattern': 'MM-dd-yyyy'
                                            }
                                        }"
                                    />
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
             <!-- 1. New Requests Table -->
            <VBox>
                <HBox renderType="Bare">

                    	<Table
						id="newRequestsTable"
		mode="SingleSelectMaster"
		growing="true"
		growingScrollToLoad="true"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
        class="sapUiSmallMarginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/newRequests',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<!-- <Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu> -->
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="New Requests" />
				<ToolbarSpacer/>
				<!-- <Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/> -->
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>
			<dnd:DragInfo
				groupName="newRequestsToRFP"
				sourceAggregation="items" />
					<dnd:DragInfo
				groupName="newRequestsToOnGoing"
				sourceAggregation="items" />

				<dnd:DragInfo
				groupName="newRequestsToGoLive"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="newRequestsToPast"
				sourceAggregation="items" />
			<dnd:DropInfo
				groupName="RFPToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="onGoingToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="goLiveToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="pastToNewRequests"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
                	<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
		</dragDropConfig>

        
		

		<items>
			<ColumnListItem>
				<cells>
                    	<ObjectIdentifier 
						title="{ProjectModel>account}"
						text="{ProjectModel>primaryContact}"/>
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>

                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightNewRequests"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftRFP"
                        />
                    </VBox>

                    <!-- 2. RFP Table -->

                    	<Table
						id="RFPTable"
		mode="SingleSelectMaster"
		growing="true"
				growingScrollToLoad="true"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
         class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/RFP',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<!-- <Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu> -->
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="RFP" />
				<ToolbarSpacer/>
				<!-- <Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/> -->
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>
			<dnd:DragInfo
				groupName="RFPToNewRequests"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="RFPToOnGoing"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="RFPToGoLive"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="RFPToPast"
				sourceAggregation="items" />
			<dnd:DropInfo
				groupName="newRequestsToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="onGoingToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="goLiveToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
				<dnd:DropInfo
				groupName="pastToRFP"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
			<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
        </dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<ObjectIdentifier 
						title="{ProjectModel>account}"
						text="{ProjectModel>primaryContact}"/>
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>

                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightRFP"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftOnGoing"
                        />
                    </VBox>

                       <!-- 3. on going table -->

                   	<Table
					id="OnGoingTable"
		mode="SingleSelectMaster"
		growing="true"
		growingScrollToLoad="true"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
         class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/On-Going',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<!-- <Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu> -->
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="On-Going" />
				<ToolbarSpacer/>
				<!-- <Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/> -->
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>

		
		<dnd:DragInfo
				groupName="onGoingToNewRequests"
				sourceAggregation="items"/>
			<dnd:DragInfo
				groupName="onGoingToRFP"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="onGoingToGoLive"
				sourceAggregation="items"/>
					<dnd:DragInfo
				groupName="onGoingToPast"
				sourceAggregation="items"/>
			
				<dnd:DropInfo
				groupName="newRequestsToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>

				<dnd:DropInfo
				groupName="RFPToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>

				<dnd:DropInfo
				groupName="goLiveToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>

				<dnd:DropInfo
				groupName="pastToOnGoing"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
			<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
        </dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<ObjectIdentifier 
						title="{ProjectModel>account}"
						text="{ProjectModel>primaryContact}"/>
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>


                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightOnGoing"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftGoLive"
                        />
                    </VBox>
                       <!-- 4. Go Live Table -->

                    	<Table
						id="GoLiveTable"
		mode="SingleSelectMaster"
		growing="true"
		growingScrollToLoad="true"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
        class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/Go-Live',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<!-- <Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu> -->
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="Go-Live" />
				<ToolbarSpacer/>
				<!-- <Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/> -->
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account" />
			</Column>
            <Column>
				<Text text="Topic" />
			</Column>
			
		</columns>
		<dragDropConfig>
			<dnd:DragInfo
				groupName="goLiveToRFP"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="goLiveToNewRequests"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="goLiveToOnGoing"
				sourceAggregation="items" />
					<dnd:DragInfo
				groupName="goLiveToPast"
				sourceAggregation="items" />
					<dnd:DropInfo
				groupName="newRequestsToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="RFPToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
			<dnd:DropInfo
				groupName="onGoingToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="pastToGoLive"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
                	<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
		</dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<ObjectIdentifier 
						title="{ProjectModel>account}"
						text="{ProjectModel>primaryContact}"/>
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>


                    <VBox justifyContent="Center">
                        <Button
                            class="sapUiTinyMarginBottom"
                            icon="sap-icon://navigation-right-arrow"
                            tooltip="Move to selected"
                            press="onRightGoLive"
                        />
                        <Button
                            icon="sap-icon://navigation-left-arrow"
                            tooltip="Move to available"
                            press="onLeftPast"
                        />
                    </VBox>

                     <!-- 5. Past Table -->
                   	<Table
					id="PastTable"
		mode="SingleSelectMaster"
		growing="true"
		growingScrollToLoad="true"
		beforeOpenContextMenu="onBeforeOpenContextMenu"
        selectionChange="onSelectionChange"
        class="sapUiSmallMarginBeginEnd"
        sticky="ColumnHeaders,HeaderToolbar"
        delete="onGridListItemDelete"
        noDataText="No Data"

		 items="{path: 'ProjectModel>/Past',
                          sorter: {
                                                path: 'account',
                                                descending: false
                                            }}">
		
		
        	<contextMenu>
			<!-- <Menu>
				<MenuItem text="Move up" press="moveUp" />
				<MenuItem text="Move down" press="moveDown" />
			</Menu> -->
		</contextMenu>
		<headerToolbar>
			<OverflowToolbar>
				<Title text="Past" />
				<ToolbarSpacer/>
				<!-- <Button
					icon="sap-icon://navigation-up-arrow"
					tooltip="Move up"
					press="moveUp"/>
				<Button
					icon="sap-icon://navigation-down-arrow"
					tooltip="Move down"
					press="moveDown"/> -->
			</OverflowToolbar>
		</headerToolbar>
		<columns>
			<Column>
				<Text text="Account"/>
			</Column>
            <Column>
				<Text text="Topic"/>
			</Column>
			
		</columns>
		<dragDropConfig>
		<dnd:DragInfo
				groupName="pastToNewRequests"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="pastToRFP"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="pastToOnGoing"
				sourceAggregation="items" />
				<dnd:DragInfo
				groupName="pastToGoLive"
				sourceAggregation="items" />
		
			<dnd:DropInfo
				groupName="newRequestsToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="RFPToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="onGoingToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
					<dnd:DropInfo
				groupName="goLiveToPast"
				drop="onDrop"   dropLayout="Horizontal"  dropPosition="Between"  targetAggregation="items"/>
                	<dnd:DragDropInfo
				sourceAggregation="items"
				targetAggregation="items"
				dropPosition="Between"
				drop="onDropSelectedProductsTable"/>
		</dragDropConfig>

		<items>
			<ColumnListItem>
				<cells>
					<ObjectIdentifier 
						title="{ProjectModel>account}"
						text="{ProjectModel>primaryContact}"/>
                      <tnt:InfoLabel
                                            text="{ProjectModel>topic}"
                                            colorScheme="{path:'ProjectModel>topic', formatter:'.formatter.topicColorSchemeFormatter'}"
                                            visible="{= ${ProjectModel>topic} !== null &amp;&amp; ${ProjectModel>topic} !== ''}"
                                            renderMode="Narrow"
                                        />
					
				</cells>
			</ColumnListItem>
		</items>
	</Table>

                </HBox>
                <!-- 
                <VBox class="sapUiLargeMarginTop">
                <smartchart:SmartChart id ="smartChartTeamForecast" enableAutoBinding="true" initialized="onInitChart"
                                    entitySet="teamForecastCopy" 
                                    useVariantManagement="false"
			                        useChartPersonalisation="true"
			                        header="{firstName}'s Utilization" showFullScreenButton="true" selectionMode="Multi"
			                        showChartTooltip="true" showDrillBreadcrumbs="false"
			                        showDetailsButton="false" showDrillButtons="true" noData="Utilization is either not tracked or not applicable for {firstName}"
			                        showSemanticNavigationButton="true" >
                                    	<smartchart:toolbar>
				<OverflowToolbar>
					<ToolbarSpacer/>				
					<OverflowToolbarButton icon="sap-icon://add" type="Accept" tooltip="Register a new forecast" press="onAddEditForecast" />
                   </OverflowToolbar>
			</smartchart:toolbar>
            </smartchart:SmartChart>
                </VBox>  -->
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>
